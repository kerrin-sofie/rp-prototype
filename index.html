<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Reservation - Arbio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-content">
            <div class="brand">Arbio</div>
            <button class="business-stays-btn">Business Stays</button>
            <button class="icon-btn" aria-label="Menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <line x1="9" y1="9" x2="15" y2="9"/>
                    <line x1="9" y1="15" x2="15" y2="15"/>
                </svg>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Reservation Summary Card -->
        <section class="reservation-card">
            <div class="card-header">
                <div class="progress-indicator"></div>
            </div>
            
            <h1 class="property-title">Testing Multi units - Manu & Ting</h1>
            
            <div class="property-address">
                <p>Schönhauser Allee, 10 Berlin-Bezirk Pankow, Germany, Berlin, Germany</p>
                <button class="map-icon" aria-label="View on map">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                </button>
            </div>

            <div class="dates-container">
                <div class="date-info">
                    <span class="date-label">Check-in</span>
                    <div class="date-value">Wed, Dec 3</div>
                    <div class="time-value">3pm</div>
                </div>
                
                <div class="date-divider"></div>
                
                <div class="date-info">
                    <span class="date-label">Check-out</span>
                    <div class="date-value">Wed, Dec 10</div>
                    <div class="time-value">11am</div>
                </div>
            </div>

        </section>

        <!-- Accordion Sections -->
        <section class="accordion-container">
            <!-- Payment Details -->
            <div class="accordion-item" id="paymentDetailsSection">
                <button class="accordion-header" aria-expanded="false" data-section="payment">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                            <line x1="1" y1="10" x2="23" y2="10"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Payment Details</h3>
                        <p>Your total cost for your trip</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <!-- Payment Status (shown only in unpaid phase) -->
                    <div class="payment-status-row" id="paymentStatusInPaymentSection" style="display: none;">
                        <span class="payment-status-label">Payment status:</span>
                        <span class="payment-badge" id="paymentStatusBadgeInPayment">PAID</span>
                    </div>
                    
                    <div class="payment-status-row" id="totalPriceRow" style="display: none;">
                        <span class="payment-status-label">Total price:</span>
                        <span id="totalPriceValue">83€</span>
                    </div>
                    
                    <!-- Unpaid Reservation Alert (shown only in unpaid phase) -->
                    <div class="unpaid-reservation-alert" id="unpaidReservationAlert" style="display: none;">
                        <p class="unpaid-alert-description">Your payment on booking.com was unsuccessful. Booking.com may not have shown you this error. If you want to verify please check with your payment provider.</p>
                        
                        <!-- Payment Error Reason -->
                        <div class="payment-error-reason" id="paymentErrorReason">
                            <span class="payment-error-label">Payment Error:</span>
                            <span class="payment-error-text" id="paymentErrorText">Card declined due to insufficient funds</span>
                        </div>
                        
                        <p class="unpaid-alert-warning"><strong>Important:</strong> Complete payment below to secure your reservation, or it will be cancelled.</p>
                        
                        <button class="pay-now-btn" id="payNowBtn">
                            Pay <span id="outstandingAmount">83€</span> now
                        </button>
                        
                        <!-- Apply Discount Code Section (inside alert box) -->
                        <div class="discount-code-section" id="discountCodeSection">
                            <button class="discount-code-header" id="discountCodeHeader" aria-expanded="false">
                                <span>Apply discount code</span>
                                <svg class="discount-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="discount-code-content" id="discountCodeContent">
                                <div class="discount-input-group">
                                    <input 
                                        type="text" 
                                        id="couponInput" 
                                        class="coupon-input" 
                                        placeholder="Add coupon"
                                    >
                                    <button class="coupon-add-btn" id="couponAddBtn">Add</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Price Breakdown (shown only in pre-checkin phase) -->
                    <div class="payment-breakdown" id="paymentBreakdownPreCheckin" style="display: none;" data-phase="pre-checkin">
                        <div class="payment-row">
                            <span>7 nights</span>
                            <span>€840.00</span>
                        </div>
                        <div class="payment-row">
                            <span>Cleaning fee</span>
                            <span>€35.00</span>
                        </div>
                        <div class="payment-row">
                            <span>Service fee</span>
                            <span>€52.50</span>
                        </div>
                        <div class="payment-row total">
                            <span>Total</span>
                            <span>€927.50</span>
                        </div>
                    </div>
                    
                    <!-- Price Breakdown (shown only in during-stay phase) -->
                    <div class="payment-breakdown" id="paymentBreakdownDuringStay" style="display: none;" data-phase="during-stay">
                        <div class="payment-row">
                            <span>7 nights</span>
                            <span>€840.00</span>
                        </div>
                        <div class="payment-row">
                            <span>Cleaning fee</span>
                            <span>€35.00</span>
                        </div>
                        <div class="payment-row">
                            <span>Service fee</span>
                            <span>€52.50</span>
                        </div>
                        <div class="payment-row security-hold-row">
                            <div class="security-hold-left">
                                <span>Security Hold:</span>
                                <button class="security-hold-info-icon" id="securityHoldInfoIcon" aria-label="Security Hold information">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <line x1="12" y1="16" x2="12" y2="12"/>
                                        <circle cx="12" cy="8" r="1.5" fill="currentColor"/>
                                    </svg>
                                </button>
                                <span class="security-hold-badge">Hold Success</span>
                            </div>
                            <span>€250.00</span>
                        </div>
                        <!-- Security Hold Popover -->
                        <div class="security-hold-popover" id="securityHoldPopover">
                            <div class="popover-content">
                                <h4 class="popover-title">Security Hold</h4>
                                <p class="popover-text">This is a temporary hold, not a charge. We'll release it after checkout. Most banks complete release in 2–7 business days.</p>
                            </div>
                            <div class="popover-arrow"></div>
                        </div>
                        <div class="payment-row total">
                            <span>Total</span>
                            <span>€927.50</span>
                        </div>
                    </div>
                    
                    <!-- Invoice Details Button (shown in pre-checkin and during-stay phases) -->
                    <button class="invoice-details-btn" id="invoiceDetailsBtn" style="display: none;">
                        Check Invoice Details
                    </button>
                    
                    <!-- Invoice Disclaimer (shown in pre-checkin and during-stay phases) -->
                    <p class="invoice-disclaimer" id="invoiceDisclaimer" style="display: none;">
                        Please note that invoice issuance is only available on the day of check-out. Invoice details can only be changed before the check-out day. Any other edits cannot be taken into account later.
                    </p>
                    
                    <!-- Request Invoice Button (shown in post-checkout phase) -->
                    <button class="request-invoice-btn" id="requestInvoiceBtn" style="display: none;">
                        Request Invoice
                    </button>
                    
                    <!-- Request Invoice Disclaimer (shown in post-checkout phase) -->
                    <p class="request-invoice-disclaimer" id="requestInvoiceDisclaimer" style="display: none;">
                        Please note that any changes to invoice details cannot be taken into account at this point in time.
                    </p>
                </div>
            </div>

            <!-- Access My Apartment -->
            <div class="accordion-item" id="accessMyApartmentSection">
                <button class="accordion-header" aria-expanded="false" data-section="access">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Access My Apartment</h3>
                        <p id="accessDescription">Everything you need to know about check-in.</p>
                    </div>
                </button>
                <div class="accordion-content">
                    <!-- Unpaid Phase Content (Locked State) -->
                    <div class="access-content-unpaid" id="accessContentUnpaid" style="display: none;">
                        <div class="locked-state">
                            <div class="locked-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                            </div>
                            <p class="locked-message">Access to your apartment is locked until payment is completed.</p>
                        </div>
                    </div>
                    
                    <!-- Pre Check-in Content (with bullet points) -->
                    <div class="access-content-pre-checkin" id="accessContentPreCheckin">
                        <ul>
                            <li>Internet or WiFi access is required at the time of check-in</li>
                            <li>Your access codes will become available at the start of your reservation once the timer has completed</li>
                        </ul>
                    </div>
                    
                    <!-- During Stay Content (with quick access buttons) -->
                    <div class="access-content-during-stay" id="accessContentDuringStay" style="display: none;">
                        <div class="quick-access-buttons">
                            <div class="quick-access-item" data-location="Main Gate">
                                <div class="quick-access-left">
                                    <span class="quick-access-label">Main Gate</span>
                                </div>
                                <div class="quick-access-right">
                                    <button class="quick-access-action-btn">Press to unlock door</button>
                                </div>
                            </div>
                            
                            <div class="quick-access-item" data-location="Building Door">
                                <div class="quick-access-left">
                                    <span class="quick-access-label">Building Door</span>
                                </div>
                                <div class="quick-access-right">
                                    <button class="quick-access-action-btn">Press to unlock door</button>
                                </div>
                            </div>
                            
                            <div class="quick-access-item" data-location="Apartment Door">
                                <div class="quick-access-left">
                                    <span class="quick-access-label">Apartment Door</span>
                                </div>
                                <div class="quick-access-right">
                                    <button class="quick-access-action-btn">Press to unlock door</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="checkin-guide-btn" id="openCheckinGuide">
                        See how to get in
                    </button>
                    <a href="#" class="no-internet-link" id="openNoInternetModal" data-text-pre-checkin="Won't have internet when arriving at the property?" data-text-during-stay="Don't have internet available when entering the property">
                        Won't have internet when arriving at the property?
                    </a>
                </div>
            </div>

            <!-- Get Help With Your Stay (During Stay - appears after Access My Apartment) -->
            <div class="accordion-item help-section-during-stay" id="helpSectionDuringStay" style="display: none;">
                <button class="accordion-header" aria-expanded="false" data-section="help-during-stay">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Get Help With Your Stay</h3>
                        <p>If you have any troubles - we are here to help</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <div class="help-section">
                        <a href="#" class="help-card">
                            <div class="help-card-content">
                                <h4 class="help-card-title">Troubleshooting for Access Issues</h4>
                                <p class="help-card-description">Have an issue with the locks? Find our more</p>
                            </div>
                            <svg class="help-card-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </a>
                        
                        <a href="#" class="help-card">
                            <div class="help-card-content">
                                <h4 class="help-card-title">Report an issue</h4>
                                <p class="help-card-description">Have an issue with your stay? Let us know</p>
                            </div>
                            <svg class="help-card-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </a>
                        
                        <a href="#" class="help-card">
                            <div class="help-card-content">
                                <h4 class="help-card-title">Frequent asked questions</h4>
                                <p class="help-card-description">Have a question? We've got you!</p>
                            </div>
                            <svg class="help-card-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Upgrade Your Stay -->
            <div class="accordion-item" id="upgradeYourStaySection">
                <button class="accordion-header" aria-expanded="false" data-section="upgrade">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Upgrade Your Stay</h3>
                        <p>Book available extra services for your stay</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <p>Extra services and upgrades are available. Contact us for more information about enhancing your stay.</p>
                </div>
            </div>

            <!-- Things To Know -->
            <div class="accordion-item" id="thingsToKnowSection">
                <button class="accordion-header" aria-expanded="false" data-section="things">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Things To Know</h3>
                        <p>Instructions and house rules</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <div class="info-section">
                        <h4>House Rules</h4>
                        <ul>
                            <li>No smoking inside the apartment</li>
                            <li>Quiet hours: 10 PM - 8 AM</li>
                            <li>Maximum occupancy as per reservation</li>
                            <li>No parties or events</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Reservation Details -->
            <div class="accordion-item" id="reservationDetailsSection">
                <button class="accordion-header" aria-expanded="false" data-section="reservation">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Reservation Details</h3>
                        <p>Information about your reservation</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <div class="reservation-details">
                        <div class="detail-row">
                            <span class="detail-label">Guest name</span>
                            <span class="detail-value">Muslem Test</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Number of guests</span>
                            <span class="detail-value">1 guest</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">ETA / ETD</span>
                            <span class="detail-value">
                                ETA: 3pm &nbsp;&nbsp; ETD: 10am
                                <a href="#" class="edit-link">Edit</a>
                            </span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Reservation ID</span>
                            <span class="detail-value">rsv-57cf7e558762</span>
                        </div>
                        <div class="detail-row" id="paymentStatusInReservationDetails">
                            <span class="detail-label">Payment status</span>
                            <span class="payment-badge" id="paymentStatusBadge">PAID</span>
                        </div>
                        <button class="book-again-btn">Book again</button>
                    </div>
                </div>
            </div>

            <!-- Get Help (Default position - for pre-checkin and post-checkout) -->
            <div class="accordion-item help-section-default" id="helpSectionDefault">
                <button class="accordion-header" aria-expanded="false" data-section="help">
                    <div class="accordion-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <div class="accordion-text">
                        <h3>Get Help With Your Stay</h3>
                        <p>If you have any troubles - we are here to help</p>
                    </div>
                    <svg class="accordion-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="accordion-content">
                    <div class="help-section">
                        <a href="#" class="help-card">
                            <div class="help-card-content">
                                <h4 class="help-card-title">Report an issue</h4>
                                <p class="help-card-description">Have an issue with your stay? Let us know</p>
                            </div>
                            <svg class="help-card-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </a>
                        
                        <a href="#" class="help-card">
                            <div class="help-card-content">
                                <h4 class="help-card-title">Frequent asked questions</h4>
                                <p class="help-card-description">Have a question? We've got you!</p>
                            </div>
                            <svg class="help-card-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="brand">Arbio</div>
            <div class="footer-links">
                <a href="#">TERMS & CONDITIONS</a>
                <a href="#">PRIVACY POLICY</a>
            </div>
        </footer>
    </main>

    <!-- Mode Selector -->
    <div class="mode-selector-container">
        <button class="mode-selector-btn" id="modeSelectorBtn" aria-label="Select reservation phase">
            <span class="mode-label">Phase:</span>
            <span class="mode-value" id="currentMode">During Stay</span>
            <svg class="mode-chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
            </svg>
        </button>
        <div class="mode-options" id="modeOptions">
            <button class="mode-option" data-mode="unpaid">Unpaid</button>
            <button class="mode-option" data-mode="pre-checkin">Pre Check-in</button>
            <button class="mode-option active" data-mode="during-stay">During Stay</button>
            <button class="mode-option" data-mode="post-checkout">Post Check-out</button>
        </div>
    </div>

    <!-- Pre Check-in Modal -->
    <div class="pre-checkin-modal" id="preCheckinModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-drag-handle"></div>
            <div class="modal-step-indicator">
                <div class="modal-step-label" id="modalStepLabel">STEP 1</div>
                <div class="modal-progress-bar">
                    <div class="modal-progress-segment active" data-step="1"></div>
                    <div class="modal-progress-segment" data-step="2"></div>
                </div>
            </div>

            <!-- Step 1: Check-in & Check-out -->
            <div class="modal-step" id="modalStep1">
                <h2 class="modal-title">Check-in & Check-out</h2>
                <p class="modal-description">
                    We kindly ask for your estimated arrival and departure times to help us coordinate with our cleaning staff. This step is mandatory in order to access your check-in information. You can easily update this information on the reservation page in the reservation details section if your plans change.
                </p>

                <div class="time-selector-section">
                    <div class="time-selector-group">
                        <label class="time-label">Check-in</label>
                        <p class="time-hint">Check-in is available from 3pm</p>
                        <div class="time-dropdown-wrapper">
                            <button class="time-dropdown-btn" id="checkinDropdownBtn" aria-label="Select check-in time">
                                <span class="time-dropdown-placeholder">Check-in</span>
                                <svg class="time-dropdown-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="time-dropdown-menu" id="checkinDropdownMenu">
                                <button class="time-option" data-time="3pm">3pm</button>
                                <button class="time-option" data-time="4pm">4pm</button>
                                <button class="time-option" data-time="5pm">5pm</button>
                                <button class="time-option" data-time="6pm">6pm</button>
                                <button class="time-option" data-time="7pm">7pm</button>
                                <button class="time-option" data-time="8pm">8pm</button>
                                <button class="time-option" data-time="9pm">9pm</button>
                                <button class="time-option" data-time="10pm">10pm</button>
                                <button class="time-option" data-time="11pm">11pm</button>
                            </div>
                        </div>
                    </div>

                    <div class="time-selector-group">
                        <label class="time-label">Check-out</label>
                        <p class="time-hint">Check-out is latest at 10am</p>
                        <div class="time-dropdown-wrapper">
                            <button class="time-dropdown-btn" id="checkoutDropdownBtn" aria-label="Select check-out time">
                                <span class="time-dropdown-placeholder">Check-out</span>
                                <svg class="time-dropdown-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="time-dropdown-menu" id="checkoutDropdownMenu">
                                <button class="time-option" data-time="6am">6am</button>
                                <button class="time-option" data-time="7am">7am</button>
                                <button class="time-option" data-time="8am">8am</button>
                                <button class="time-option" data-time="9am">9am</button>
                                <button class="time-option" data-time="10am">10am</button>
                            </div>
                        </div>
                        <div class="time-info-note">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                            <span>Please note you can book a late check-out on your reservation page.</span>
                        </div>
                    </div>
                </div>

                <button class="modal-continue-btn" id="modalContinueBtn">Continue</button>
            </div>

            <!-- Step 2: Personal Data (placeholder for now) -->
            <div class="modal-step" id="modalStep2" style="display: none;">
                <h2 class="modal-title">Personal Data</h2>
                <p class="modal-description">
                    We collect your data to enhance your experience and do not share it with third-party companies.
                </p>
                <!-- Step 2 content will be added later -->
                <div class="modal-actions">
                    <button class="modal-back-btn" id="modalBackBtn">Back</button>
                    <button class="modal-submit-btn" id="modalSubmitBtn">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Check-in Guide Overlay -->
    <div class="checkin-overlay" id="checkinOverlay">
        <div class="overlay-nav">
            <div class="brand">Arbio</div>
            <button class="close-btn" id="closeOverlay" aria-label="Close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>

        <div class="overlay-content">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23e5e7eb'/%3E%3Ctext x='50' y='50' font-family='sans-serif' font-size='14' fill='%239ca3af' text-anchor='middle' dominant-baseline='middle'%3Echeckin-guide%3C/text%3E%3C/svg%3E" alt="Check-in guide" class="guide-image">

            <div class="step-indicator">
                <div class="step-label" id="stepLabel">STEP 1</div>
                <div class="progress-bar">
                    <div class="progress-segment active" data-step="1"></div>
                    <div class="progress-segment" data-step="2"></div>
                    <div class="progress-segment" data-step="3"></div>
                </div>
            </div>

            <div class="step-content">
                <h2 class="step-title" id="stepTitle">Testing Step Title 1</h2>
                <p class="step-description" id="stepDescription">Testing description 1</p>

                <div class="code-display" id="codeDisplay">
                    <span class="code-char">t</span>
                    <span class="code-char">e</span>
                    <span class="code-char">s</span>
                    <span class="code-char">t</span>
                    <span class="code-char">1</span>
                    <span class="code-char">2</span>
                    <span class="code-char">3</span>
                </div>
                
                <!-- Troubleshooting Guide Link (shown only in during-stay phase for step 1) -->
                <a href="#" class="troubleshooting-guide-link" id="troubleshootingGuideLink" style="display: none;">View troubleshooting guide</a>
            </div>

            <div class="step-navigation">
                <button class="back-btn" id="backBtn" style="display: none;">Back</button>
                <button class="continue-btn" id="continueBtn">Continue</button>
            </div>
            <a href="#" class="help-link">Didn't work? Get help</a>
        </div>

        <footer class="overlay-footer">
            <div class="brand">Arbio</div>
        </footer>
    </div>

    <!-- Access Trouble Modal -->
    <div class="access-trouble-modal" id="accessTroubleModal">
        <div class="modal-overlay"></div>
        <div class="access-trouble-modal-content">
            <div class="modal-drag-handle"></div>
            <button class="modal-close-btn" id="closeAccessTroubleModal" aria-label="Close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            
            <div class="access-trouble-header">
                <h2 class="access-trouble-title">Access Trouble</h2>
                <span class="backup-badge">BACKUP AVAILABLE</span>
            </div>
            
            <div class="troubleshooting-guide-section">
                <a href="https://help.arbio.com/troubleshooting-guide" class="troubleshooting-guide-modal-link" id="troubleshootingGuideModalLink" target="_blank" rel="noopener noreferrer">View troubleshooting guide for the lock</a>
            </div>
            
            <p class="access-trouble-question">What was the reason you couldn't access the apartment?</p>
            
            <form class="access-trouble-form" id="accessTroubleForm">
                <div class="radio-options-group">
                    <label class="radio-option-trouble">
                        <input type="radio" name="accessIssue" value="missing-unlock-button">
                        <span>Missing "Unlock" button</span>
                    </label>
                    
                    <label class="radio-option-trouble">
                        <input type="radio" name="accessIssue" value="no-reaction-bell">
                        <span>No reaction once ringing the bell</span>
                    </label>
                    
                    <label class="radio-option-trouble">
                        <input type="radio" name="accessIssue" value="unclear-bell-location">
                        <span>Unclear ring bell location</span>
                    </label>
                    
                    <label class="radio-option-trouble">
                        <input type="radio" name="accessIssue" value="other">
                        <span>Other</span>
                    </label>
                </div>
                
                <div class="backup-access-info">
                    <div class="backup-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                    </div>
                    <p class="backup-message">Good news — backup access is available</p>
                </div>
                
                <button type="submit" class="get-backup-access-btn" id="getBackupAccessBtn">Get Backup Access</button>
            </form>
        </div>
    </div>

    <!-- No Internet Modal -->
    <div class="no-internet-modal" id="noInternetModal">
        <div class="modal-overlay"></div>
        <div class="no-internet-modal-content">
            <div class="modal-drag-handle"></div>
            <button class="modal-close-btn" id="closeNoInternetModal" aria-label="Close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            
            <h2 class="no-internet-modal-title">No Internet Access?</h2>
            
            <div class="no-internet-reassurance">
                <p id="reassuranceText">You don't need to worry about not having internet. We'll make sure you receive everything you need via SMS!</p>
            </div>

            <form class="no-internet-form" id="noInternetForm">
                <div class="form-group">
                    <label class="form-label">How should we send your instructions?</label>
                    <div class="radio-options">
                        <label class="radio-option">
                            <input type="radio" name="deliveryMethod" value="sms" checked>
                            <span>Via SMS (Phone)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="deliveryMethod" value="email">
                            <span>Via Email</span>
                        </label>
                    </div>
                </div>

                <div class="form-group" id="phoneNumberGroup">
                    <label for="phoneNumber" class="form-label">Phone Number</label>
                    <input 
                        type="tel" 
                        id="phoneNumber" 
                        name="phoneNumber" 
                        class="phone-input" 
                        placeholder="+49 123 456 7890"
                        required
                    >
                    <p class="form-hint">We'll send your check-in instructions via SMS at 3PM (your official check-in time)</p>
                </div>

                <div class="form-group" id="emailGroup" style="display: none;">
                    <label for="emailAddress" class="form-label">Email Address</label>
                    <input 
                        type="email" 
                        id="emailAddress" 
                        name="emailAddress" 
                        class="phone-input" 
                        placeholder="your.email@example.com"
                        required
                    >
                    <p class="form-hint">We'll send your check-in instructions via email at 3PM (your official check-in time)</p>
                </div>

                <div class="form-group optional-questionnaire">
                    <label class="form-label optional-label">Why might you not have internet access? (Optional)</label>
                    <div class="radio-options compact-options">
                        <label class="radio-option compact-option">
                            <input type="radio" name="noInternetReason" value="no-mobile-data">
                            <span>I won't have mobile data</span>
                        </label>
                        <label class="radio-option compact-option">
                            <input type="radio" name="noInternetReason" value="roaming-issues">
                            <span>Roaming issues in Germany</span>
                        </label>
                        <label class="radio-option compact-option">
                            <input type="radio" name="noInternetReason" value="phone-battery">
                            <span>Phone battery concerns</span>
                        </label>
                        <label class="radio-option compact-option">
                            <input type="radio" name="noInternetReason" value="prefer-sms">
                            <span>I prefer SMS instructions</span>
                        </label>
                        <label class="radio-option compact-option">
                            <input type="radio" name="noInternetReason" value="other">
                            <span>Other reason</span>
                        </label>
                    </div>
                </div>

                <button type="submit" class="no-internet-submit-btn" id="submitBtn">Send Instructions via SMS</button>
            </form>
        </div>
    </div>

    <!-- Unlock Door Confirmation Modal -->
    <div class="unlock-confirmation-modal" id="unlockConfirmationModal">
        <div class="modal-overlay"></div>
        <div class="unlock-confirmation-modal-content">
            <div class="modal-drag-handle"></div>
            <button class="modal-close-btn" id="closeUnlockConfirmationModal" aria-label="Close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            
            <div class="unlock-confirmation-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
            </div>
            
            <h2 class="unlock-confirmation-title">Unlock Door?</h2>
            <p class="unlock-confirmation-description" id="unlockConfirmationDescription">
                Pressing this button will unlock the door. Make sure you're ready to enter.
            </p>
            
            <div class="unlock-confirmation-actions">
                <button class="unlock-confirmation-cancel-btn" id="cancelUnlockBtn">Cancel</button>
                <button class="unlock-confirmation-confirm-btn" id="confirmUnlockBtn">Unlock Door</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
